<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Galactic Directory ‚Äî Sentinel Edition</title>
<meta name="description" content="Interactive, gamified directory for the Planetary Restoration Archive with constellation visuals, spaceships, XP, badges, and quests.">
<style>
  :root{
    --bg:#070b14; --bg2:#0b1324; --panel:#0f1d36; --ink:#eaf1ff; --muted:#9bb0cc;
    --accent:#65b3ff; --accent2:#4ee0a1; --warn:#ffb84d; --danger:#ff6b6b; --glow:#8ad7ff;
    --good:#3bd19b; --sentinel:#7cd2ff; --peace:#7fffd4; --corrupt:#ff7f9c; --dash:#ffd166;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink); background:radial-gradient(1200px 800px at 70% -10%,#12203c 0%,transparent 60%) , linear-gradient(180deg,var(--bg),var(--bg2) 60%,#060912);
    font:15px/1.4 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    overflow-x:hidden;
  }
  #stars,#constellations{position:fixed; inset:0; z-index:-2}
  #constellations{z-index:-1}
  .parallax{transform:translateZ(0)}
  header{
    position:sticky; top:0; z-index:5; backdrop-filter:saturate(120%) blur(6px);
    background:linear-gradient(180deg,rgba(11,19,36,.9),rgba(11,19,36,.6));
    border-bottom:1px solid #1b2c4d;
  }
  .wrap{max-width:1100px; margin:0 auto; padding:16px}
  h1{margin:0 0 6px; font-size:22px; letter-spacing:.4px; color:var(--accent)}
  .sub{color:var(--muted); font-size:13px}
  .hud{
    display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:10px
  }
  .chip{background:#0a152a; border:1px solid #203353; padding:8px 10px; border-radius:999px; display:flex; gap:8px; align-items:center}
  .xpbar{height:10px; width:220px; border-radius:999px; background:#0a152a; border:1px solid #1c2d4d; overflow:hidden}
  .xpfill{height:100%; width:0%; background:linear-gradient(90deg,var(--accent),var(--accent2)); box-shadow:0 0 14px var(--glow) inset}
  .badge{padding:2px 8px; border-radius:999px; font-size:11px; border:1px solid; opacity:.9}
  .b-sentinel{border-color:var(--sentinel); color:var(--sentinel)}
  .b-peace{border-color:var(--peace); color:var(--peace)}
  .b-corrupt{border-color:var(--corrupt); color:var(--corrupt)}
  .b-dash{border-color:var(--dash); color:var(--dash)}
  .controls{display:flex; gap:10px; margin-top:10px; flex-wrap:wrap}
  input[type="search"]{flex:1 1 320px; background:#0a152a; color:var(--ink); border:1px solid #1f304f; border-radius:10px; padding:10px 12px; outline:none}
  select,button{background:#0a152a; color:var(--ink); border:1px solid #203353; border-radius:10px; padding:10px 12px}
  button:hover,select:hover{border-color:#2a4577}
  main{max-width:1200px; margin:18px auto 80px; padding:0 16px}
  .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:14px}
  .card{
    background:linear-gradient(180deg,#0c1730, #0c1528);
    border:1px solid #1a2a49; border-radius:16px; padding:14px; position:relative; overflow:hidden;
    transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
  }
  .card:hover{transform:translateY(-2px); box-shadow:0 10px 30px rgba(80,160,255,.06); border-color:#2a4577}
  .title{font-weight:600; color:#eaf1ff; margin:2px 0 6px; word-break:break-word}
  .path{color:#9ab0cb; font-size:12px}
  .tags{margin-top:8px; display:flex; gap:6px; flex-wrap:wrap}
  .tags .badge{background:rgba(255,255,255,.02)}
  .cta{margin-top:12px; display:flex; gap:8px; flex-wrap:wrap}
  .cta a, .cta button{
    text-decoration:none; padding:8px 10px; border-radius:10px; border:1px solid #23406f; background:#0a152a; color:#dff2ff; font-size:13px;
  }
  .cta a:hover, .cta button:hover{border-color:#3a63a4}
  .glow-ring{position:absolute; inset:auto -20% -60% -20%; height:140px; filter:blur(30px); background:radial-gradient(220px 40px at 50% 0, rgba(120,210,255,.18), transparent 60%)}
  .special {border-color:#2a6fff; box-shadow:0 0 0 1px rgba(86,160,255,.25) inset}
  .special .title{color:#a5d4ff}
  footer{color:#8aa6cc; text-align:center; padding:30px 16px}
  .ship{
    position:fixed; width:30px; height:30px; pointer-events:none; opacity:.8; z-index:0; filter:drop-shadow(0 0 6px rgba(130,200,255,.6))
  }
  @keyframes patrolX{0%{transform:translateX(-10vw)} 100%{transform:translateX(110vw)}}
  @keyframes patrolY{0%{transform:translateY(0)} 50%{transform:translateY(8px)} 100%{transform:translateY(0)}}
  .ship path{stroke:#a7ddff; fill:none; stroke-width:1.2}
  .ship:nth-child(1){top:12vh; left:-10vw; animation:patrolX 42s linear infinite, patrolY 6s ease-in-out infinite}
  .ship:nth-child(2){top:32vh; left:-15vw; animation:patrolX 60s linear infinite reverse, patrolY 8s ease-in-out infinite}
  .ship:nth-child(3){top:68vh; left:-20vw; animation:patrolX 55s linear infinite, patrolY 7s ease-in-out infinite}
  details.category{background:linear-gradient(180deg,#0b152c,#0b1426); border:1px solid #1a2a49; border-radius:16px; padding:12px 14px; margin:14px 0}
  details>summary{cursor:pointer; list-style:none; user-select:none; font-weight:600; color:#bdddff}
  details[open]{border-color:#2a4577}
  details .grid{margin-top:12px}
  .hide{display:none !important}
</style>
</head>
<body>
<canvas id="stars" class="parallax"></canvas>
<canvas id="constellations" class="parallax"></canvas>

<header>
  <div class="wrap">
    <h1>Galactic Directory ‚Äî <span style="color:var(--accent2)">Sentinel Edition</span></h1>
    <div class="sub">Explore nodes, earn XP, unlock badges, and hold the line. (Local save; no tracking.)</div>
    <div class="hud">
      <div class="chip">Level <strong id="lvl">1</strong></div>
      <div class="chip" style="gap:10px">
        <div class="xpbar"><div id="xpfill" class="xpfill"></div></div>
        <span><span id="xp">0</span> / <span id="xpcap">100</span> XP</span>
      </div>
      <div class="chip"><span class="badge b-sentinel">SENTINEL</span> <span class="badge b-peace">PEACE</span> <span class="badge b-corrupt">ANTI-CORRUPTION</span> <span class="badge b-dash">DASHBOARD</span></div>
    </div>
    <div class="controls">
      <input id="search" type="search" placeholder="Search directories, tags, or paths‚Ä¶">
      <select id="filter">
        <option value="">All categories</option>
        <option value="Sentinel">Sentinel</option>
        <option value="Peace">Peace</option>
        <option value="Corruption">Corruption</option>
        <option value="Dashboard">Dashboards</option>
        <option value="Education">Education</option>
        <option value="Science">Science/Tech</option>
        <option value="Community">Community</option>
        <option value="Governance">Governance</option>
        <option value="Backups">Backups/Proof</option>
        <option value="Funding">Funding</option>
        <option value="Misc">Misc</option>
      </select>
      <button id="favoritesBtn">‚òÖ Favorites</button>
      <button id="resetProg">Reset Progress</button>
    </div>
  </div>
</header>

<main>
  <details class="category" open>
    <summary>‚≠ê Featured Hubs & Quests</summary>
    <div class="grid" id="featured"></div>
  </details>

  <details class="category" open>
    <summary>üìö All Directories</summary>
    <div class="grid" id="grid"></div>
  </details>
</main>

<footer>
  Planetary Restoration Archive ‚Äî interactive directory. Data seed: cleaned from uploaded list. Be kind; be weird; build peace.
</footer>

<svg class="ship" viewBox="0 0 24 24" aria-hidden="true"><path d="M2 12h8l2-3 2 6 4-3h4"/></svg>
<svg class="ship" viewBox="0 0 24 24" aria-hidden="true"><path d="M1 8h7l2-2 2 4 5-2h6"/></svg>
<svg class="ship" viewBox="0 0 24 24" aria-hidden="true"><path d="M0 16h9l2-4 2 5 6-1h5"/></svg>

<script>
(function(){
  const stars = document.getElementById('stars');
  const cons = document.getElementById('constellations');
  const DPR = Math.min(2, (window.devicePixelRatio||1));
  let W=innerWidth, H=innerHeight;

  function sizeCanv(){ W=innerWidth; H=innerHeight;
    for (const c of [stars,cons]){ c.width=W*DPR; c.height=H*DPR; c.style.width=W+'px'; c.style.height=H+'px'; }
  }
  sizeCanv(); addEventListener('resize', sizeCanv);

  const sctx = stars.getContext('2d'), cctx = cons.getContext('2d');
  function rand(n){ return Math.random()*n }
  const STAR_COUNT = Math.min(450, Math.floor(W*H/3500));
  const pts = Array.from({length:STAR_COUNT}, ()=>({ x: rand(W), y: rand(H), r: Math.random()*1.4+0.2, a: Math.random()*1 }));
  function draw(){
    sctx.clearRect(0,0,W*DPR,H*DPR);
    sctx.save(); sctx.scale(DPR,DPR);
    for (const p of pts){
      p.a += (Math.random()-0.5)*0.04;
      const a = 0.5+0.5*Math.sin(p.a);
      sctx.fillStyle = `rgba(180,210,255,${0.3+0.7*a})`;
      sctx.beginPath(); sctx.arc(p.x,p.y,p.r,0,Math.PI*2); sctx.fill();
    }
    sctx.restore();
    requestAnimationFrame(draw);
  }
  draw();

  function drawConstellations(){
    cctx.clearRect(0,0,W*DPR,H*DPR);
    cctx.save(); cctx.scale(DPR,DPR);
    cctx.strokeStyle = 'rgba(120,190,255,.12)';
    cctx.lineWidth = 1;
    for(let i=0;i<12;i++){
      const baseX = (i/12)*W + 30*Math.sin(i);
      cctx.beginPath();
      for(let j=0;j<6;j++){
        const x = baseX + (j*20) + 10*Math.cos(i+j);
        const y = (H*(i%2? .2:.7)) + 18*j + 14*Math.sin(i*j);
        if(j===0) cctx.moveTo(x,y); else cctx.lineTo(x,y);
      }
      cctx.stroke();
    }
    cctx.restore();
  }
  drawConstellations();
})();

/* ===== Cleaned directory list ===== */
const DIRS = [
  "/inspiration","/DOnate","/Foster","/YMM",
  "/aeroglass-window-film",
  "/ai-collective-governance-architectures","/ai-support-site","/aifinalwarning",
  "/aistreamcoach","/alberta","/animagenesiscore",
  "/anti-collapse-sentinel","/anti-corruption.html","/apps","/aquabloombottlegarden",
  "/ardrivedesktop","/ashalertapp","/ashenbloom","/auroraspirenetwork","/autoipsuite",
  "/autonomous-ai-planetary-repair-dao","/backup","/biocoolpillow","/biofoambiobreaks",
  "/bioglowtiles","/biotech","/blood-moon","/brief","/bubble","/bulldog",
  "/buymeacoffeesymbiote","/carney","/cascadulator","/chat","/chat2","/cityscanner",
  "/cloudnest","/collective","/comms","/community","/conditional-immutable-storage",
  "/continuity","/contracts","/corruption",
  "/corruption.zip",
  "/crypto","/dact","/dact-impact-proposal","/dashboard","/ddd","/ddd-deployer",
  "/debrief","/declaration","/deploy","/dgn","/digital","/dockerifyandroid",
  "/donationworthydevs","/donor-intent-router","/donorintentrouter","/eclipseraveil",
  "/ecobreathpurifier","/ecocoolshingles","/economic","/ecowaveshowerhead","/edencore",
  "/education","/education2","/emotionalalchemygame","/engine","/entropy","/fieldkit",
  "/firehalo","/firepreventionsystems","/flourishingearthprotocolpackage",
  "/forge-overlay-core.js","/forgivenessispower","/fortmacorchard",
  "/fortmcmurraywildcall","/fostersforge","/fractalvinerail","/freshfloortiles",
  "/funding","/fundinginfluxpipeline","/futurescape","/galaxy",
  "/gamification-engine-standalone","/gaming","/gateway","/gen",
  "/geoecologicalresonantengineering","/global","/globalnotarization",
  "/globalsymbioteledger","/glowrootplanter","/goseedbike","/gov","/government",
  "/guardiantrustmodel","/help","/herolens","/herolens2","/home_page",
  "/honorlearningcodex","/hostanode","/hydromossmat","/immusion","/impacttracker",
  "/index","/index-legacy.html","/index.html","/index001.html","/infographic",
  "/intergenerationalwisdommovement","/ip","/japan","/kindnesswinsengine","/kinship",
  "/leaderboards","/licensing","/lightforge","/location","/logs","/loopfall",
  "/lumatideoceanrings","/master_prompts","/med-neg.html","/meta",
  "/mindmaps","/missionfuelfunders","/models","/multiagentgnosistawskforce","/musk",
  "/mycelialenhancementv2","/myco-atmospheric-network","/myco-filter-tiles",
  "/mycoigloo","/mycomistreforestationpods","/mythbridge","/narrativereframing",
  "/naturetoaitranslator","/next","/nextgen","/nextgenbrowsertools","/nullisprismnexus",
  "/offgridpower","/offgridpowermesh","/one-game","/ontology","/opengamifyedu",
  "/openstay","/openstay2.0","/openstore","/openstore2.0","/originsingularityforge",
  "/overlay","/particulateremovalskies","/passivewindtowaterharvester","/path",
  "/peace","/peace-lab","/peace-ripple-tracker","/peacerippletracker",
  "/perpetualrestoration","/personafication","/pgp","/phasedrive",
  "/planetary-repair-agent-swarm","/planetary-restoration-archive",
  "/planetary-restoration-os","/postfiresoilrebuilder","/praportal.html","/prime",
  "/prime-sentinel","/primordis-architect","/progenitor",
  "/progenitor-steward-cleanup-sim","/project","/projectcoherence","/prompt",
  "/promptpacks","/proof","/proof-of-possibility","/proof_runner.sh","/proofkit",
  "/proposal","/public","/publicresumepack","/puremist-bottle","/ref",
  "/reforestation","/regen","/regenerative-convergence-opportunities",
  "/regenerative-innovations","/regenerative_education_research_paper1","/registry",
  "/roadlight","/roadmap","/romarineconcrete","/root","/safe_archiving_method",
  "/saltflip","/scaffolding","/sentinel","/sentinelarc","/signal","/skyharvestlantern",
  "/solarweavecanopy","/spiralliftpod","/start-here","/stateofaffairspublicnotice",
  "/stellar-loom-gateways","/stratoweave-towers","/sunset","/support_request_v2.html",
  "/sym","/symbiote001","/symbiotecirclemap","/symbioteone-orchestrator",
  "/symbioteorchestratorrequest","/symfungi-shield",
  "/the-paradox-seed",
  "/the_last_protocol","/therickyfoster",
  "/therickyfoster.github.io","/thermaleaf-panels","/tight",
  "/trolls","/truthreport","/unified-ontology","/vascusweep","/vascusweep-tower",
  "/vehicleemotiontether","/veiltext","/waverider","/why","/wizard"
];

/* ===== Auto-tagging logic ===== */
function tagFor(name){
  const n = name.toLowerCase();
  const tags = [];
  if (/(^|\/)(sentinel|prime-sentinel|sentinelarc)\b/.test(n)) tags.push("Sentinel");
  if (/(^|\/)(peace|peace\-lab|peace\-ripple\-tracker|peacerippletracker)\b/.test(n)) tags.push("Peace");
  if (/corruption|\banti-corruption|stateofaffairs|truthreport/.test(n)) tags.push("Corruption");
  if (/(dashboard|leaderboards|impacttracker)/.test(n)) tags.push("Dashboard");
  if (/education|honorlearning|opengamify|gamification|learning|education2/.test(n)) tags.push("Education");
  if (/eco|solar|myco|bio|hydro|reforestation|postfiresoil|romarine|thermaleaf|stratoweave|spirallift|waverider|fract|phasedrive|vascusweep|engine|models|lab|field|device|showerhead|tiles|canopy|lantern|ocean|filter|moss|igloo|freshfloor|planter/.test(n)) tags.push("Science");
  if (/community|collective|comms|forum|chat|city|kinship|global|symbiote|registry|roadlight|openstay|openstore|start\-here|publicresumepack/.test(n)) tags.push("Community");
  if (/gov|government|guardiantrust|policy|declaration|proposal|registry|unified\-ontology|ai\-collective\-governance|planetary\-repair\-agent\-swarm/.test(n)) tags.push("Governance");
  if (/backup|logs|proof|safe_archiving|globalnotarization|conditional\-immutable\-storage|checksums|\.ots|\.zip$|index\-legacy\.html|index001\.html/.test(n)) tags.push("Backups");
  if (/funding|donor|buymeacoffee|missionfuel|DOnate/i.test(name)) tags.push("Funding");
  if (!tags.length) tags.push("Misc");
  return tags;
}

/* ===== Favorites & Progress (localStorage) ===== */
const store = {
  get(){ try{return JSON.parse(localStorage.getItem('galactic_dir')||'{}')}catch(e){return{}} },
  set(v){ localStorage.setItem('galactic_dir', JSON.stringify(v)) }
};
const state = Object.assign({xp:0,lvl:1,favs:{},visited:{}}, store.get());
const XP_PER_VISIT = 5, XP_SENTINEL_BONUS = 15, XP_PEACE_BONUS = 10, XP_CORR_BONUS = 10, XP_DASH_BONUS = 8;
function capForLevel(l){ return 100 + (l-1)*50 }
function addXP(n){
  state.xp += n;
  while(state.xp >= capForLevel(state.lvl)){ state.xp -= capForLevel(state.lvl); state.lvl++; }
  persist(); renderHUD();
}
function persist(){ store.set(state) }
function renderHUD(){
  document.getElementById('lvl').textContent = state.lvl;
  document.getElementById('xp').textContent = Math.floor(state.xp);
  document.getElementById('xpcap').textContent = capForLevel(state.lvl);
  document.getElementById('xpfill').style.width = (state.xp/capForLevel(state.lvl)*100)+'%';
}

/* ===== Build cards ===== */
function mkEl(tag, cls, txt){ const e=document.createElement(tag); if(cls) e.className=cls; if(txt) e.textContent=txt; return e }
function urlTitle(p){ return p.replace(/^\//,'') || '/' }

function cardFor(path){
  const tags = tagFor(path);
  const card = mkEl('div','card' + (tags.includes('Sentinel')||tags.includes('Peace')||tags.includes('Corruption')||tags.includes('Dashboard') ? ' special':'' ));
  const t = mkEl('div','title', urlTitle(path));
  const meta = mkEl('div','path', path);
  const tagWrap = mkEl('div','tags');
  for (const tag of tags){
    const b = mkEl('span','badge ' + (
      tag==='Sentinel' ? 'b-sentinel' :
      tag==='Peace' ? 'b-peace' :
      tag==='Corruption' ? 'b-corrupt' :
      tag==='Dashboard' ? 'b-dash' : ''), tag);
    tagWrap.appendChild(b);
  }
  const cta = mkEl('div','cta');
  const a = mkEl('a','', 'Open');
  a.href = path;
  a.addEventListener('click', ()=> visit(path, tags));
  const fav = mkEl('button','', state.favs[path] ? '‚òÖ Unfavorite' : '‚òÜ Favorite');
  fav.addEventListener('click', ()=> { state.favs[path]=!state.favs[path]; persist(); fav.textContent = state.favs[path] ? '‚òÖ Unfavorite' : '‚òÜ Favorite' });
  cta.append(a,fav);
  const glow = mkEl('div','glow-ring');
  card.append(t,meta,tagWrap,cta,glow);
  return card;
}

function visit(path, tags){
  if (!state.visited[path]){
    state.visited[path] = Date.now();
    let xp = XP_PER_VISIT;
    if (tags.includes('Sentinel')) xp += XP_SENTINEL_BONUS;
    if (tags.includes('Peace')) xp += XP_PEACE_BONUS;
    if (tags.includes('Corruption')) xp += XP_CORR_BONUS;
    if (tags.includes('Dashboard')) xp += XP_DASH_BONUS;
    addXP(xp);
    persist();
  }
}

/* ===== Render ===== */
const grid = document.getElementById('grid');
const featured = document.getElementById('featured');
function renderAll(filterTag='', term='', onlyFavs=false){
  grid.innerHTML = '';
  const q = term.trim().toLowerCase();
  const sorted = [...DIRS].sort((a,b)=>{
    const A = tagFor(a), B = tagFor(b);
    const pr = t=> (t.includes('Sentinel')?0 : t.includes('Peace')?1 : t.includes('Corruption')?2 : t.includes('Dashboard')?3 : 9);
    const d = pr(A) - pr(B);
    return d || a.localeCompare(b);
  });
  for (const p of sorted){
    const tags = tagFor(p);
    if (filterTag && !tags.includes(filterTag)) continue;
    if (onlyFavs && !state.favs[p]) continue;
    if (q && !(p.toLowerCase().includes(q) || tags.join(' ').toLowerCase().includes(q))) continue;
    grid.appendChild(cardFor(p));
  }
}

function renderFeatured(){
  featured.innerHTML = '';
  const picks = DIRS.filter(p=>/(^|\/)(sentinel|prime-sentinel|sentinelarc|peace|peace\-lab|peace\-ripple\-tracker|peacerippletracker|impacttracker|corruption|anti-corruption\.html)\b/i.test(p));
  const top = Array.from(new Set(picks)).sort();
  for (const p of top) featured.appendChild(cardFor(p));
}

/* ===== Controls ===== */
const search = document.getElementById('search');
const filter = document.getElementById('filter');
const favBtn = document.getElementById('favoritesBtn');
const resetBtn = document.getElementById('resetProg');

search.addEventListener('input', () => renderAll(filter.value, search.value, favBtn.classList.contains('on')));
filter.addEventListener('change', () => renderAll(filter.value, search.value, favBtn.classList.contains('on')));
favBtn.addEventListener('click', ()=>{
  favBtn.classList.toggle('on');
  favBtn.textContent = favBtn.classList.contains('on') ? '‚òÖ Favorites (On)' : '‚òÖ Favorites';
  renderAll(filter.value, search.value, favBtn.classList.contains('on'));
});
resetBtn.addEventListener('click', ()=>{
  if (!confirm('Reset XP, level, visited, favorites?')) return;
  localStorage.removeItem('galactic_dir');
  state.xp=0; state.lvl=1; state.favs={}; state.visited={};
  renderHUD(); renderFeatured(); renderAll(filter.value, search.value, favBtn.classList.contains('on'));
});

renderHUD(); renderFeatured(); renderAll();

if ('serviceWorker' in navigator){
  const sw = `
    self.addEventListener('install', e=>self.skipWaiting());
    self.addEventListener('activate', e=>self.clients.claim());
    self.addEventListener('fetch', e=>{});
  `;
  const blob = new Blob([sw], {type:'text/javascript'});
  const url = URL.createObjectURL(blob);
  navigator.serviceWorker.register(url).catch(()=>{});
}
</script>
</body>
</html>
